# Окружение
ENVIRONMENT=development

# FastAPI
API_V1_PREFIX=/api/v1
PROJECT_NAME=AI Image Generator
DEBUG=True
SECRET_KEY=your-secret-key-here-change-in-production
FRONTEND_URL=http://localhost:5173

# База данных PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=ai_image_bot
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Redis для Celery
REDIS_URL=redis://localhost:6379/0

# Telegram Bot (Legacy, опционально для обратной совместимости)
TELEGRAM_BOT_TOKEN=your-bot-token-here
TELEGRAM_BOT_SECRET=your-telegram-secret-for-webapp-validation
BOT_USERNAME=YourBotUsername

# Google OAuth (для веб-авторизации)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# JWT настройки
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# OpenRouter API (Claude Haiku)
OPENROUTER_API_KEY=your-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=anthropic/claude-3-haiku-20240307
OPENROUTER_PROMPT_MODEL=openai/gpt-4.1-mini

# kie.ai Nano Banana API (Primary AI image generation service)
USE_KIE_AI=true
KIE_AI_API_KEY=your-kie-ai-api-key-here
KIE_AI_BASE_URL=https://api.kie.ai/v1
KIE_AI_TIMEOUT=90
KIE_AI_POLL_INTERVAL=5

# ЮKassa
YUKASSA_SHOP_ID=your-yukassa-shop-id
YUKASSA_SECRET_KEY=your-yukassa-secret-key
YUKASSA_WEBHOOK_SECRET=your-webhook-secret

# Mock режим для платежей (только для локального тестирования)
# Установите в true для эмуляции платежей без реального ЮKassa
PAYMENT_MOCK_MODE=false

# Монетизация (Billing v4)
BILLING_V4_ENABLED=false
BILLING_GENERATION_COST_CREDITS=2
BILLING_ASSISTANT_COST_CREDITS=1
BILLING_FREEMIUM_OPS_LIMIT=5
BILLING_FREE_TRIAL_CREDITS=10
BILLING_SUBSCRIPTION_TIERS='{"basic":{"price":299,"ops_limit":80},"standard":{"price":499,"ops_limit":130},"pro":{"price":499,"ops_limit":130},"premium":{"price":899,"ops_limit":250}}'
BILLING_CREDIT_PACKAGES='{"small":{"price":100,"credits":20},"medium":{"price":230,"credits":50},"large":{"price":400,"credits":100},"pro":{"price":900,"credits":250}}'
BILLING_LEDGER_ENABLED=true
BILLING_MUTEX_TIMEOUT_MS=2000
YOOKASSA_IDEMPOTENCY_HEADER=Idempotence-Key
FREEMIUM_ACTIONS_PER_MONTH=10
FREEMIUM_WATERMARK_TEXT="AI Image Generator"

# Налоги и комиссии
NPD_TAX_RATE=0.04
YUKASSA_COMMISSION_RATE=0.028

# Хранение файлов
UPLOAD_DIR=./uploads
MAX_FILE_SIZE_MB=5
ALLOWED_EXTENSIONS=jpg,jpeg,png
PHOTO_RETENTION_HOURS=24
CHAT_HISTORY_RETENTION_DAYS=30

# Rate limiting
RATE_LIMIT_PER_MINUTE=10

# Sentry (опционально)
SENTRY_DSN=

# Admin
ADMIN_SECRET_KEY=your-admin-secret-key
ADMIN_EMAIL_WHITELIST=admin@example.com
ALLOWED_EMAIL_DOMAINS=
REGISTER_RATE_LIMIT_PER_MINUTE=10

# Email Verification
EMAIL_VERIFICATION_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_USE_TLS=true
EMAIL_FROM=your-email@gmail.com
EMAIL_FROM_NAME=AI Image Generator
EMAIL_VERIFICATION_TOKEN_TTL_MIN=30
EMAIL_VERIFICATION_RESEND_LIMIT=3
EMAIL_VERIFICATION_RESEND_PER_IP_PER_HOUR=10
