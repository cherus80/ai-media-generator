# Окружение
ENVIRONMENT=development

# FastAPI
API_V1_PREFIX=/api/v1
PROJECT_NAME=AI Generator
DEBUG=True
SECRET_KEY=your-secret-key-here-change-in-production
FRONTEND_URL=http://localhost:5173

# База данных PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=ai_image_bot
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Redis для Celery
REDIS_URL=redis://localhost:6379/0

# Telegram Bot (Legacy, опционально для обратной совместимости)
TELEGRAM_BOT_TOKEN=your-bot-token-here
TELEGRAM_BOT_SECRET=your-telegram-secret-for-webapp-validation
BOT_USERNAME=YourBotUsername

# Google OAuth (для веб-авторизации)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# VK ID OAuth (для веб-авторизации)
VK_APP_ID=your-vk-app-id
VK_CLIENT_SECRET=your-vk-client-secret
VK_JWKS_URL=https://id.vk.com/.well-known/jwks

# Yandex ID OAuth (для веб-авторизации)
YANDEX_CLIENT_ID=your-yandex-client-id
YANDEX_CLIENT_SECRET=your-yandex-client-secret

# Telegram Login Widget
TELEGRAM_BOT_USERNAME=your_bot_name_without_@

# JWT настройки
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=43200

# OpenRouter API (GPT-4.1 Mini)
OPENROUTER_API_KEY=your-openrouter-api-key-here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=anthropic/claude-3-haiku-20240307
OPENROUTER_PROMPT_MODEL=openai/gpt-4.1-mini

# GrsAI Nano Banana Pro API (Primary AI image generation service)
GRS_AI_API_KEY=sk-cde062b5ea814dc3acc70b311f230425
GRS_AI_BASE_URL=https://grsaiapi.com
GRS_AI_TIMEOUT=300
GRS_AI_POLL_INTERVAL=5
GRS_AI_MAX_POLLS=60
GRS_AI_MODEL=nano-banana-pro
GRS_AI_FALLBACK_MODEL=nano-banana-pro-cl
GRS_AI_IMAGE_SIZE=2K

# kie.ai Nano Banana Pro API (Fallback)
USE_KIE_AI=false
GENERATION_PRIMARY_PROVIDER=grsai
GENERATION_FALLBACK_PROVIDER=kie_ai
KIE_AI_API_KEY=your-kie-ai-api-key-here
KIE_AI_BASE_URL=https://api.kie.ai/v1
KIE_AI_TIMEOUT=300
KIE_AI_POLL_INTERVAL=5

# Telegram alerts (error notifications)
TELEGRAM_ALERTS_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_ALERTS_RATE_LIMIT_PER_MINUTE=10
TELEGRAM_ALERTS_INCLUDE_PII=false
API_RATE_LIMIT_FITTING_STATUS_PER_MINUTE=300

# ЮKassa
YUKASSA_SHOP_ID=your-yukassa-shop-id
YUKASSA_SECRET_KEY=your-yukassa-secret-key
YUKASSA_WEBHOOK_SECRET=your-webhook-secret

# Mock режим для платежей (только для локального тестирования)
# Установите в true для эмуляции платежей без реального ЮKassa
PAYMENT_MOCK_MODE=false

# Монетизация (Billing v5)
BILLING_V5_ENABLED=true
BILLING_GENERATION_COST_CREDITS=2
BILLING_ASSISTANT_COST_CREDITS=1
BILLING_FREEMIUM_OPS_LIMIT=5
BILLING_FREE_TRIAL_CREDITS=6
BILLING_SUBSCRIPTION_TIERS='{"basic":{"price":399,"ops_limit":30},"standard":{"price":699,"ops_limit":60},"pro":{"price":699,"ops_limit":60},"premium":{"price":1290,"ops_limit":120}}'
BILLING_CREDIT_PACKAGES='{"small":{"price":199,"credits":20},"medium":{"price":449,"credits":50},"large":{"price":799,"credits":100},"pro":{"price":1690,"credits":250}}'
BILLING_LEDGER_ENABLED=true
BILLING_MUTEX_TIMEOUT_MS=2000
YOOKASSA_IDEMPOTENCY_HEADER=Idempotence-Key
FREEMIUM_ACTIONS_PER_MONTH=10
FREEMIUM_WATERMARK_TEXT="AI Generator"

# Налоги и комиссии
NPD_TAX_RATE=0.04
YUKASSA_COMMISSION_RATE=0.028

# Хранение файлов
UPLOAD_DIR=./uploads
MAX_FILE_SIZE_MB=10
ALLOWED_EXTENSIONS=jpg,jpeg,png
PHOTO_RETENTION_HOURS=24
CHAT_HISTORY_RETENTION_DAYS=30

# Rate limiting
RATE_LIMIT_PER_MINUTE=10

# Sentry (опционально)
SENTRY_DSN=

# Admin
ADMIN_SECRET_KEY=your-admin-secret-key
ADMIN_EMAIL_WHITELIST=admin@example.com
ALLOWED_EMAIL_DOMAINS=
REGISTER_RATE_LIMIT_PER_MINUTE=10

# Email Verification
EMAIL_VERIFICATION_ENABLED=true
SMTP_HOST=smtp.beget.com
SMTP_PORT=465
SMTP_USER=ai-generator@mix4.ru
SMTP_PASSWORD=<SET_SMTP_PASSWORD_FOR_ai-generator@mix4.ru>
SMTP_USE_TLS=false
EMAIL_FROM=ai-generator@mix4.ru
EMAIL_FROM_NAME=AI Generator
EMAIL_VERIFICATION_TOKEN_TTL_MIN=30
EMAIL_VERIFICATION_RESEND_LIMIT=3
EMAIL_VERIFICATION_RESEND_PER_IP_PER_HOUR=10
