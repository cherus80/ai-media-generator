# Security & Compliance Checklist (03.12.2025)

## Сеть и инфраструктура
- [ ] Включить принудительный HTTPS (Caddy redirect: настроено) и HSTS.
- [ ] Закрыть входящие на БД/Redis снаружи (ACL/firewall), доступ только с backend/localhost.
- [ ] SSH: ключи, без пароля; ограничить по IP, fail2ban/защита от брутфорса.
- [ ] Ограничить админ-панель по VPN/IP, если возможно.

## Секреты и учетные данные
- [ ] Уникальные SECRET_KEY/JWT_SECRET_KEY/SMTP пароли в `.env` (не хранить в git).
- [ ] Разные пароли для почты и VPS; rotate по расписанию.
- [ ] Зашифровать бэкапы (если выводятся за пределы DC).

## Приложение
- [ ] Пароли — bcrypt (уже в проекте); минимальная длина пароля >12 (UI подсказка).
- [ ] Админ 2FA: включить TOTP/OTP для аккаунтов admin/super_admin (требует доработки кода).
- [ ] Логирование админ-операций: добавлено в `admin.py` (make-admin, delete-user, edit-credits).
- [ ] Rate limiting регистрации/логина уже есть; усилить лимиты при необходимости.

## Данные и хранение
- [ ] Хранение на VPS в РФ; доступ к БД только из внутренней сети.
- [ ] Резервные копии БД/файлов: ежедневный бэкап, ретеншен 7–30 дней; хранить в том же DC или зашифровано.
- [ ] Retention реализован: фото 24ч, чаты 30дней; периодически проверять фоновые задачи очистки.

## Мониторинг и аудит
- [ ] Настроить сбор логов (admin actions, auth) и алерты по ошибкам (Sentry/лог-агрегатор).
- [ ] Проверить Celery/фоновые задачи, что очистка выполняется по cron/beat.
- [ ] Настроить обновления пакетов/OS (apt/yum) регулярно.

## Документация
- [ ] Публичные страницы: /oferta, /privacy (актуализированы).
- [ ] Контакты оператора ПДн и e-mail поддержки в UI и политиках: ai-generator@mix4.ru.

## Быстрый список действий на проде
1. Обновить `.env` секреты и пароль почты; перезапустить backend/frontend/Caddy.
2. Закрыть внешние порты БД/Redis, оставить 80/443.
3. Настроить бэкапы БД (pg_dump + cron) и проверять восстановление.
4. Ограничить доступ к админке (VPN/IP) и включить 2FA для админов после реализации.
